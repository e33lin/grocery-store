<p style="color: green"><%= notice %></p>

<h1>SmartCart</h1>

<%= render "form", list: @list %>


<% if !@current_list.empty? %>
    <table>
        <%# <thead>
            <tr>
                <th>Item</th>
                <th>Quantity</th>
                <th colspan="3"></th>
            </tr>
        </thead> %>
        
        <tbody>
            <% @current_list.each do |list| %>
            <tr>
                <td><%= list.item %></td>
                
                <td><%= form_with model: list, method: :patch, local: true do |f| %>
                <%= hidden_field_tag 'item', list.item %>
                <%= f.select :quantity, [1,2,3,4,5], {}, {value: list.quantity, class: 'form-control', onchange: 'this.form.submit();'} %>
                <% end %>

                <td><%= form_with model: list, method: :delete, local: true do |f| %>
                <%= hidden_field_tag 'item', list.item%>
                <%= f.submit 'Delete' %>
                <% end %>

                </td>
                
            </tr>
            <% end %>
            
        </tbody>
    </table>
<% else %>
Your list is empty. Add something!
<% end %>

<% if !@current_list.empty? %>
<%# <%= link_to "See my recommendations!", recommendations_path %> 

    <%= form_with url: stores_path_url do |f| %>
        <%= f.radio_button :n_stores, 1 , :checked => true%>
        <%= f.label :n_stores, "1 Store" %>
        <%= f.radio_button :n_stores, 2  %>
        <%= f.label :n_stores, "2 stores" %>
        <br>
        <%= f.submit 'See Recommendations' %>
    <% end %>

<% end %>

<br>
<%# <%= @current_list %>
<br>
<%= link_to "Instructions and stores", instructions_path%> 
<br>
